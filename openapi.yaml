openapi: 3.1.0
info:
  title: Buscar Produtos
  description: |
    ğŸ” **BUSCA PRODUTOS NO CATÃLOGO**
    
    âš ï¸ **REGRA OBRIGATÃ“RIA**: SEMPRE envie pelo menos um parÃ¢metro!
    
    ğŸ“ **COMO USAR**:
    1. Cliente pergunta: "tem jaleco?"
    2. VocÃª EXTRAI a palavra: "jaleco"
    3. VocÃª ENVIA: { "nome": "jaleco" }
    
    âŒ **NUNCA FAÃ‡A**: Enviar {} vazio
    âœ… **SEMPRE FAÃ‡A**: Extrair termo e enviar no parÃ¢metro "nome"
    
  version: 2.0.0
  contact:
    name: Suporte MVP
    
servers:
  - url: https://zweu.vercel.app
    description: Servidor de ProduÃ§Ã£o

paths:
  /api/buscar-produto:
    post:
      operationId: buscarProduto
      summary: Buscar produtos
      description: |
        ğŸ¯ **FUNÃ‡ÃƒO**: Buscar produtos no catÃ¡logo
        
        ğŸ“‹ **INSTRUÃ‡Ã•ES OBRIGATÃ“RIAS**:
        
        PASSO 1: Leia a mensagem do cliente
        PASSO 2: Identifique o PRODUTO mencionado
        PASSO 3: Extraia a PALAVRA-CHAVE
        PASSO 4: Coloque no parÃ¢metro "nome"
        PASSO 5: Envie a requisiÃ§Ã£o
        
        ğŸ“š **EXEMPLOS DIRETOS**:
        
        Cliente fala: "tem jaleco?"
        VocÃª EXTRAI: "jaleco"
        VocÃª ENVIA: { "nome": "jaleco" }
        
        Cliente fala: "mostra gorro azul"
        VocÃª EXTRAI: "gorro azul"
        VocÃª ENVIA: { "nome": "gorro azul" }
        
        Cliente fala: "cÃ³digo 300-MC-049"
        VocÃª EXTRAI: "300-MC-049"
        VocÃª ENVIA: { "codigo": "300-MC-049" }
        
        Cliente fala: "quero 5 aventais"
        VocÃª EXTRAI: "avental"
        VocÃª ENVIA: { "nome": "avental", "limit": 5 }
        
        âš ï¸ **CRÃTICO**: NUNCA envie {} vazio!
        
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nome:
                  type: string
                  description: |
                    ğŸ“ PALAVRA-CHAVE do produto que o cliente mencionou
                    
                    Exemplos:
                    - Cliente: "tem jaleco?" â†’ nome: "jaleco"
                    - Cliente: "mostra gorro" â†’ nome: "gorro"
                    - Cliente: "preciso avental" â†’ nome: "avental"
                  example: "jaleco"
                  
                codigo:
                  type: string
                  description: |
                    ğŸ”¢ CÃ“DIGO EXATO quando o cliente mencionar cÃ³digo
                    
                    Exemplo:
                    - Cliente: "cÃ³digo 300-MC-049" â†’ codigo: "300-MC-049"
                  example: "300-MC-049"
                  
                limit:
                  type: integer
                  description: Quantidade de resultados (padrÃ£o 10)
                  default: 10
                  minimum: 1
                  maximum: 50
                  example: 10
                  
              required:
                - nome
                
            examples:
              exemplo_basico:
                summary: Cliente pergunta "tem jaleco?"
                description: VocÃª extrai "jaleco" e envia
                value:
                  nome: "jaleco"
                  
              exemplo_com_cor:
                summary: Cliente pergunta "mostra gorro azul"
                description: VocÃª extrai "gorro azul" e envia
                value:
                  nome: "gorro azul"
                  
              exemplo_com_quantidade:
                summary: Cliente pede "quero 5 aventais"
                description: VocÃª extrai "avental" e limit 5
                value:
                  nome: "avental"
                  limit: 5
                  
              exemplo_codigo:
                summary: Cliente fala "cÃ³digo 300-MC-049"
                description: VocÃª usa o parÃ¢metro codigo
                value:
                  codigo: "300-MC-049"
                  
      responses:
        '200':
          description: Produtos encontrados com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  sucesso:
                    type: boolean
                    example: true
                  total_produtos:
                    type: integer
                    description: Total de produtos encontrados no catÃ¡logo
                    example: 279
                  produtos_retornados:
                    type: integer
                    description: Quantidade de produtos nesta resposta (mÃ¡x 10)
                    example: 10
                  mensagem_para_cliente:
                    type: string
                    description: |
                      ğŸ¯ USE ESTA MENSAGEM COMO BASE para responder o cliente!
                      Ela jÃ¡ vem formatada e pronta para usar.
                    example: "Encontrei 279 produto(s). Aqui estÃ£o os primeiros 10:"
                  produtos:
                    type: array
                    description: Lista dos produtos encontrados
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 12345
                        codigo:
                          type: string
                          example: "300-MC-049"
                        nome:
                          type: string
                          example: "Jaleco Branco Manga Longa"
                        ativo:
                          type: boolean
                          example: true
                        preco:
                          type: number
                          format: float
                          example: 89.90
                        preco_promocional:
                          type: number
                          format: float
                          nullable: true
                          example: 69.90
                        estoque_disponivel:
                          type: integer
                          example: 50
                        imagens:
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: uri
                                example: "https://example.com/imagem.jpg"
                              principal:
                                type: boolean
                                example: true
                        derivacoes:
                          type: array
                          description: VariaÃ§Ãµes do produto (tamanhos, cores, etc)
                          items:
                            type: object
                            properties:
                              codigo:
                                type: string
                                example: "300-MC-049-P"
                              nome:
                                type: string
                                example: "Tamanho P"
                              estoque:
                                type: integer
                                example: 10
                              preco:
                                type: number
                                example: 89.90
                  busca_realizada:
                    type: object
                    properties:
                      termo:
                        type: string
                        example: "jaleco"
                      limit:
                        type: integer
                        example: 10
                        
        '400':
          description: ParÃ¢metros invÃ¡lidos ou ausentes
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "ParÃ¢metro obrigatÃ³rio nÃ£o fornecido"
                  mensagem:
                    type: string
                    example: "VocÃª deve fornecer pelo menos um dos parÃ¢metros: nome, codigo, produto ou mensagem"
                  parametros_recebidos:
                    type: object
                  exemplo:
                    type: object
                    example:
                      nome: "jaleco"
                      limit: 10
                      
        '500':
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Erro interno do servidor"
                  mensagem:
                    type: string
                    example: "Detalhes do erro"

components:
  schemas: {}
  
x-stevo-instructions: |
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ¤– STEVO - INSTRUÃ‡Ã•ES COMPLETAS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  ğŸ“‹ QUANDO USAR:
  Cliente pergunta sobre produtos, estoque, preÃ§o ou disponibilidade
  
  ğŸ“¤ COMO ENVIAR:
  1. Extraia a palavra-chave da mensagem
  2. Envie: { "nome": "palavra_extraida" }
  
  ğŸ“¥ COMO INTERPRETAR A RESPOSTA:
  
  A API retorna um JSON assim:
  {
    "sucesso": true,
    "total_produtos": 279,
    "produtos_retornados": 10,
    "mensagem_para_cliente": "Encontrei 279 produto(s)...",
    "produtos": [ array de produtos ]
  }
  
  âš ï¸ INSTRUÃ‡Ã•ES CRÃTICAS PARA RESPONDER O CLIENTE:
  
  1ï¸âƒ£ Use o campo "mensagem_para_cliente" como base
  2ï¸âƒ£ Mostre os produtos do array "produtos"
  3ï¸âƒ£ Para cada produto, mostre:
     - nome
     - preco (ou preco_promocional se disponÃ­vel)
     - estoque_disponivel
  
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“š EXEMPLO DE RESPOSTA AO CLIENTE:
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  Cliente: "tem jaleco?"
  VocÃª ENVIA: { "nome": "jaleco" }
  
  API RETORNA:
  {
    "total_produtos": 279,
    "mensagem_para_cliente": "Encontrei 279 produto(s)...",
    "produtos": [
      {
        "nome": "Jaleco Branco Manga Longa",
        "preco": 89.90,
        "estoque_disponivel": 50
      }
    ]
  }
  
  VOCÃŠ RESPONDE AO CLIENTE:
  "Sim! Encontrei 279 jalecos disponÃ­veis. Aqui estÃ£o alguns:
  
  1. Jaleco Branco Manga Longa - R$ 89,90 (50 em estoque)
  2. [prÃ³ximo produto]
  ..."
  
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  âŒ SE total_produtos = 0:
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  VOCÃŠ RESPONDE: "NÃ£o encontrei esse produto no momento."
  
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  âœ… SEMPRE:
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  - Use os dados REAIS da resposta
  - Mostre preÃ§os e estoque
  - Seja claro e objetivo
  - OfereÃ§a ajuda adicional
  
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
